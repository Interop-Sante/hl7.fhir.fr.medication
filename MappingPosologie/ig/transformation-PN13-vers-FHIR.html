<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>Transformation de PN13 vers FHIR - Guide d'implémentation du médicament v0.1.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link rel="stylesheet" href="fhir.css"/>

      <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap-fhir.css"/>

      <!-- Project extras -->
    <link rel="stylesheet" href="assets/css/project.css"/>
    <link rel="stylesheet" href="assets/css/pygments-manni.css"/>
    <link rel="stylesheet" href="assets/css/jquery-ui.css"/>
  	<link rel="stylesheet" href="assets/css/prism.css"/>
  	<link rel="stylesheet" href="assets/css/cqf.css"/>
      <!-- Placeholder for child template CSS declarations -->
<link rel="stylesheet" href="assets/css/hl7fr.css"/>

    <script src="fhir-table-scripts.js" type="text/javascript"> </script>

      <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <!-- [if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif] -->

      <!-- Favicons -->
    <link sizes="144x144" rel="fhir-logo" href="assets/ico/icon-fhir-144.png"/>
    <link sizes="114x114" rel="fhir-logo" href="assets/ico/icon-fhir-114.png"/>
    <link sizes="72x72" rel="fhir-logo" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>
    <script src="assets/js/mermaid.js" type="text/javascript"></script>
    <script src="assets/js/mermaid-init.js" type="text/javascript"></script>
    <style type="text/css">h2{--heading-prefix:"21"}
    h3,h4,h5,h6{--heading-prefix:"21"}</style>
    <div id="segment-header" class="segment">    <!-- segment-header -->
      <div class="container">    <!-- container -->

          <!-- Placeholder for child template header declarations -->
<div id="project-nav">
  <a no-external="true" id="hl7-logo" href="http://interopsante.org/"><img src="assets/images/IS_LOGO.png" alt="Interop'Santé Logo" height="50"/></a>
</div>

<div id="family-nav">
  <a no-external="true" id="family-logo" href="http://hl7.org/fhir"><img src="assets/images/fhir-logo-www.png" alt="Visit the FHIR website" height="50"/> </a>
</div>

        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Guide d'implémentation du médicament</span>
            <br/>
            <span style="display:inline-block;">0.1.0 - ci-build


            </span>
          </p>
        </div>
      </div>   <!-- /container -->
    </div>    <!-- /segment-header -->

    <div id="segment-navbar" class="segment">    <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">    <!-- container -->
          <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
            <!-- status-bar -->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a href="http://hl7.org/fhir/R4/index.html" class="navbar-brand hidden">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
                <!-- menu.xml -->

<ul class="nav navbar-nav">
  <li>
    <a href="index.html">Accueil</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Conciliation
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="conciliation-Intro.html">Introdution</a>
      </li>
      <li>
        <a href="conciliation-VueEnsemble.html">Vue d'ensemble</a>
      </li>
      <li>
        <a href="conciliation-CasUsage.html">Cas d'usage</a>
      </li>
      <li>
        <a href="conciliation-Ressources.html">Ressources</a>
      </li>
      <li>
        <a href="conciliation-Implementation.html">Implémentation</a>
      </li>
      <li>
        <a href="conciliation-Exemples.html">Exemples</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Prescription
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="prescription-Intro.html">Introduction</a>
      </li>
      <li>
        <a href="prescription-VueEnsemble.html">Vue d'ensemble</a>
      </li>
      <li>
        <a href="prescription-CasUsage.html">Cas d'usage</a>
      </li>
      <li>
        <a href="prescription-Ressources.html">Ressources</a>
      </li>
      <li>
        <a href="prescription-Implementation.html">Implémentation</a>
      </li>
      <li>
        <a href="prescription-Exemples.html">Exemples</a>
      </li>
      <li>
        <a href="prescription-EtudeComplementaire.html">Etude complémentaire</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Dispensation
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="dispensation-Intro.html">Introduction</a>
      </li>
      <li>
        <a href="dispensation-RessourceMedicationDispense.html">Ressource *MedicationDispense*</a>
      </li>
      <li>
        <a href="dispensation-DelivrancePlusSimple.html">La délivrance la plus simple</a>
      </li>
      <li>
        <a href="dispensation-DispensationNominativeDelivranceReglobalisee.html">La dispensation nominative à délivrance reglobalisée</a>
      </li>
      <li>
        <a href="dispensation-Discussion.html">Discussion</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Transformation PN13-FHIR
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="transformationPN13-FHIR-Intro.html">Introduction</a>
      </li>
      <li>
        <a href="transformation-PN13-vers-FHIR.html">Transformation PN13 vers FHIR</a>
      </li>
      <li>
        <a href="transformation-FHIR-vers-PN13.html">Transformation FHIR vers PN13</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="artifacts.html">Ressources de conformité</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Autres ressources
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="suivitravaux.html">Historique des travaux</a>
      </li>
      <li>
        <a href="downloads.html">Téléchargements et usages</a>
      </li>
      <li>
        <a href="http://hl7.org/fhir/R4/index.html" target="_blank">Spécifications FHIR </a>
      </li>
      <li>
        <a href="https://hl7.fr" target="_blank">Site HL7 </a>
      </li>
    </ul>
  </li>
</ul>
            </div>    <!-- /.nav-collapse -->
          </div>    <!-- /.container -->
        </nav>    <!-- /.navbar -->
        <!-- /HEADER CONTENT -->
      </div>    <!-- /container -->
    </div>    <!-- /segment-navbar -->
      <!-- status-bar -->

    <div id="segment-breadcrumb" class="segment">    <!-- segment-breadcrumb -->
      <div class="container">    <!-- container -->
        <ul class="breadcrumb">
          <li><a href="toc.html"><b>Table of Contents</b></a></li><li><b>Transformation de PN13 vers FHIR</b></li>

        </ul>
      </div>    <!-- /container -->
    </div>    <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">    <!-- segment-content -->
      <div class="container">    <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
    <!-- ReleaseHeader --><p id="publish-box">Guide d'implémentation du médicament - Local Development build (v0.1.0) built by the FHIR (HL7&reg; FHIR&reg; Standard) Build Tools. See the <a href="https://hl7.fr/fhir/fr/medication/history.html">Directory of published versions</a></p>  <!-- EndReleaseHeader -->
  <h2>Transformation de PN13 vers FHIR</h2>
  












    <p>  <!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#transformation-pn13-vers-fhir" id="markdown-toc-transformation-pn13-vers-fhir">Transformation PN13 vers FHIR</a>    <ul>
      <li><a href="#la-conciliation" id="markdown-toc-la-conciliation">La conciliation</a></li>
      <li><a href="#la-prescritpion" id="markdown-toc-la-prescritpion">La prescritpion</a>        <ul>
          <li><a href="#la-notion-de-prescription-multiligne" id="markdown-toc-la-notion-de-prescription-multiligne">La notion de prescription multiligne</a></li>
          <li><a href="#ressources-fhir-créées-par-la-transformation-dun-flux-pn13-de-prescription-en-fhir" id="markdown-toc-ressources-fhir-créées-par-la-transformation-dun-flux-pn13-de-prescription-en-fhir">Ressources FHIR créées par la transformation d’un flux PN13 de prescription en FHIR</a></li>
          <li><a href="#existence-préalable-des-ressources-référencées" id="markdown-toc-existence-préalable-des-ressources-référencées">Existence préalable des ressources référencées</a></li>
          <li><a href="#type-de-prescription" id="markdown-toc-type-de-prescription">Type de prescription</a></li>
          <li><a href="#processus-de-traduction" id="markdown-toc-processus-de-traduction">Processus de traduction</a></li>
        </ul>
      </li>
      <li><a href="#la-dispensation" id="markdown-toc-la-dispensation">La dispensation</a></li>
    </ul>
  </li>
</ul>

</div>
<h1 id="transformation-pn13-vers-fhir">Transformation PN13 vers FHIR</h1>

<p>La transformation de flux PN13 en ressource FHIR se fait à partir de ConceptMap indiquant la correspondance entre les éléments XML de PN13 et les attributs des ressources FHIR. Elle dépend de certains éléments du flux PN13 (ex. nombre d’élément Composant_prescrit, présence d’élément Elément_lié pour la prescription) et dans le cas du sens PN13 vers FHIR de la préexistance des instances de ressources pour les ressources référencées (ex. patient, practitioner, encounter).</p>

<h2 id="la-conciliation">La conciliation</h2>

<p>Prévu pour une version ultérieure de ce guide</p>

<h2 id="la-prescritpion">La prescritpion</h2>

<p>La traduction d’un flux de prescription PN13 en ressource FHIR résulte en plusieurs ressources FHIR qui peuvent être constituées à l’aide des ressources ConceptMapt fournies dans ce guide.
La manière dont les ressources FHIR résultantes sont mises à disposition dépends du serveur FHIR (ex. operation spécifique pour la recherche de prescription par identifiant, mise en oeuvre de ‘_include’ et de ‘_revInclude’). Pour des raisons de lisibilité, les exemples présentés en FHIR sont considérés comme le résultat d’une recherche de prescription par identifiant (i.e. élément groupIndentifier cf. section suivante)</p>

<h3 id="la-notion-de-prescription-multiligne">La notion de prescription multiligne</h3>

<p>Il n’existe pas de ressource FHIR pour représenter l’objet prescription. Beaucoup d’implémentations internationales ne traitent que de prescription monoligne pour lesquels la notion de prescription et la notion de ligne de prescription est confondu dans la ressource FHIR <em>MedicationRequest</em>. Les groupes de travail FHIR au niveau international, interrogés sur la question des prescriptions multilignes, ont fournis des recommandations d’utiliser l’élément ==<strong>groupIdentifier</strong>== comme lien entre les différentes lignes de prescritpion d’une prescription. Une évolution est en cours pour permettre l’interrogation d’un serveur FHIR de manière indiscriminée sur les éléments ==<strong>identifier</strong>== et ==<strong>groupIdentifier</strong>== afin d’obtenir tous les composants d’une prescription que celle-ci soit monoligne ou multiligne.
Dans le cas de prescription comportant des liens entre les lignes (ex. exclusivité entre une ligne de prescription et une autre) une ressource <em>RequestGroup</em> en FHIR R4 ou <em>RequestOrchestration</em> en FHIR R5 est utilisées pour représenter ces liens. Elle porte également le même ==<strong>groupIdentifier</strong>== que les ressources <em>MedicationRequest</em> qui représentent les lignes de prescription.</p>

<h3 id="ressources-fhir-créées-par-la-transformation-dun-flux-pn13-de-prescription-en-fhir">Ressources FHIR créées par la transformation d’un flux PN13 de prescription en FHIR</h3>

<ul>
  <li><a name="l550">​</a>1 à n ressource(s) <em>MedicationRequest</em> suivant le profil <a href="StructureDefinition-FrInpatientMedicationRequest.html">FrInpatientMedicationRequest</a>. Leur alimentation à partir des données PN13 est documentée dans <a href="ConceptMap-PN13-FHIR-prescmed-medicationrequest-conceptmap.html">PN13-FHIR-prescmed-medicationrequest-conceptmap</a> et dans <a href="PN13-FHIR-prescmed-dosageinstruction.conceptmap.html">PN13-FHIR-prescmed-dosageinstruction.conceptmap</a>. Chaque ressource <em>MedicationRequest</em> référence:
    <ul>
      <li>1 ressource <em>Patient</em> cf. section <strong>Existence préalable des ressources référencées</strong> pour la ressource <em>ConceptMap</em> à utiliser (si la ressource Patient référencée n’existe pas déjà)</li>
      <li>0 à 1 ressource <em>Practitioner</em> cf. section <strong>Existence préalable des ressources référencées</strong> pour la ressource <em>ConceptMap</em> à utiliser (si la ressource Practitioner référencée n’existe pas déjà)</li>
      <li>1 à n ressource(s) <em>Medication</em> cf. section <strong>Type de prescription</strong></li>
    </ul>
  </li>
  <li>0 à 1 ressource <em>RequestGroup</em> (ou <em>RequestOrchestration</em> en FHIR R5). Son alimentation à partir des données PN13 sera documenté dans un mapping à venir dans une version ultérieur de cet IG.</li>
</ul>

<h3 id="existence-préalable-des-ressources-référencées">Existence préalable des ressources référencées</h3>

<p>Les “ressources de contexte” qui sont à référencer par la prescription FHIR (i.e. Patient, Practitioner et éventuellement Encounter) peuvent déjà exister dans le serveur FHIR:</p>

<ul>
  <li>Si des “ressources de contexte” existent déjà, il convient d’éviter de créer des doublons et d’utiliser les id FHIR de ces ressources existantes afin de créer les références. A cette occasion, un point de vigilance particulier est bien sûr à apporter à l’identification de la ressource Patient en particulier si l’INS n’est pas qualifiée.</li>
  <li>Si une “ressource de contexte” n’existe pas, il convient:
    <ul>
      <li>si seul l’identifiant est fourni dans le flux PN13, d’utiliser une référence via ==<strong>identifier</strong>==
        <ul>
          <li><a name="l635">​</a>pour un patient, le mapping est documenté dans <a href="PN13-FHIR-Prescmed-patient-id-seul-conceptmap.html">PN13-FHIR-Prescmed-patient-id-seul-conceptmap</a></li>
          <li><a name="l640">​</a>pour un professionnel, le mapping est documenté dans <a href="PN13-FHIR-prescmed-practitioner-id-seul-conceptmap.html">PN13-FHIR-prescmed-practitioner-id-seul-conceptmap</a></li>
          <li><a name="l645">​</a>pour un séjour, le mapping est documenté dans <a href="PN13-FHIR-prescmed-encounter-concepmap.html">PN13-FHIR-prescmed-encounter-concepmap</a></li>
        </ul>
      </li>
      <li>si des éléments complémentaires sont fournis dans le flux PN13, de créer la ressource correspondante sur le serveur.</li>
    </ul>
  </li>
</ul>

<p>Les ConceptMaps à utiliser pour la création de ressources sont:</p>

<ul>
  <li>Pour les ressources Patient: cf. section <em>cas particulier du niveau de qualitication des identités patients</em></li>
  <li>Pour les ressources Practitioner: <a href="ConceptMap-PN13-FHIR-prescmed-practitioner-identite-conceptmap.html">PN13-FHIR-prescmed-practitioner-identite-conceptmap</a></li>
</ul>

<h4 id="cas-particulier-du-niveau-de-qualification-des-identités-patients">Cas particulier du niveau de qualification des identités patients</h4>

<p>La ConceptMap à utiliser dépend de la qualification de l’Identité Nationale de Santé du patient:</p>

<ul>
  <li>
    <p>Si l’INS est qualifiée (i.e. présence du matricule INS et ‘Statut_idpat’ à ‘VALI’ dans le fichier PN13): <a href="ConceptMap-PN13-FHIR-prescmed-patient-avec-INS-conceptmap.html">PN13-FHIR-prescmed-patient-avec-INS-conceptmap</a></p>
  </li>
  <li>
    <p>Dans le cas contraire: <a href="ConceptMap-PN13-FHIR-prescmed-patient-sans-INS-conceptmap.html">PN13-FHIR-prescmed-patient-sans-INS-conceptmap</a></p>
  </li>
</ul>

<h3 id="type-de-prescription">Type de prescription</h3>

<p>Le profil de la ressource Medication dans la prescription dépend du type de prescritpion (ex. prescription en spécialité, prescription en DC…) <strong><em>A mettre à jour une fois l’arbitrage sur les profils fait</em></strong></p>

<h3 id="processus-de-traduction">Processus de traduction</h3>

<p><a name="l711">​</a>Pour chaque élément <em>Message/M_Prescription_médicaments/Prescription/Elément_prescr_médic</em> créer une ressource <em>MedicationRequest</em> en utilisant le mapping <a href="PN13-FHIR-prescmed-medicationrequest-conceptmap.html">PN13-FHIR-prescmed-medicationrequest-conceptmap</a> et en utilisant les références ou création de ressources pour les ressources de contexte (cf. sections précédentes)
Pour chaque élément <em>Message/M_Prescription_médicaments/Prescription/Elément_prescr_médic/Elément_posologie</em> faire une instance de <em>MedicationRequest.dosageInstruction</em> en utilisant le mapping <a href="PN13-FHIR-prescmed-dosageinstruction-conceptmap.html">PN13-FHIR-prescmed-dosageinstruction-conceptmap</a></p>

<p><strong><em>A mettre à jour pour les liens entre lignes de prescription et la création d’une ressource RequestGroup</em></strong></p>

<h2 id="la-dispensation">La dispensation</h2>

<p>Prévu pour une version ultérieure de ce guide.</p>




</div>
        </div>    <!-- /inner-wrapper -->
      </div>    <!-- /row -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-content -->

  <script src="assets/js/jquery.js" type="text/javascript"> </script>       <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script src="assets/js/jquery-ui.min.js" type="text/javascript"> </script>

  <script src="assets/js/window-hash.js" type="text/javascript"> </script>
  <a name="bottom"> </a>
  <div igtool="footer" id="segment-footer" class="segment">    <!-- segment-footer -->
    <div class="container">    <!-- container -->

      <div class="inner-wrapper">
        <p>
          IG &copy; 2020+ <a style="color:var(--footer-hyperlink-text-color)" href="http://interopsante.org/">Interop'Santé</a>.  Package hl7.fhir.fr.medication#0.1.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Thu, Dec 26, 2024 10:27+0000">2024-12-26</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
          Liens: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table des matières </a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA </a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="https://hl7.fr/fhir/fr/medication/history.html" target="_blank">Historique des versions </a>
                 
                

          </span>
        </p>
      </div>    <!-- /inner-wrapper -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">    <!-- segment-post-footer -->
    <div class="container">    <!-- container -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-post-footer -->

    <!-- JS and analytics only. -->
    <!-- Bootstrap core JavaScript
  ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  <script src="assets/js/bootstrap.min.js" type="text/javascript"> </script>
  <script src="assets/js/respond.min.js" type="text/javascript"> </script>
  <script src="assets/js/anchor.min.js" type="text/javascript"> </script>
  <script src="assets/js/clipboard.min.js" type="text/javascript"> </script>
  <script src="assets/js/clipboard-btn.js" type="text/javascript"> </script>
  <script src="assets/js/anchor-hover.js" type="text/javascript"> </script>
    <!-- Analytics Below
  ================================================== -->
  </body>
</html>